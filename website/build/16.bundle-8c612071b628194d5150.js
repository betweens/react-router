webpackJsonp([16],{537:function(n,s){n.exports='<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >\'react\'</span>\n<span class="token keyword" >import</span> <span class="token punctuation" >{</span>\n  BrowserRouter <span class="token keyword" >as</span> Router<span class="token punctuation" >,</span>\n  Route<span class="token punctuation" >,</span>\n  Link<span class="token punctuation" >,</span>\n  Redirect<span class="token punctuation" >,</span>\n  withRouter\n<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >\'react-router-dom\'</span>\n\n<span class="token comment" spellcheck="true">////////////////////////////////////////////////////////////</span>\n<span class="token comment" spellcheck="true">// 1. Click the public page</span>\n<span class="token comment" spellcheck="true">// 2. Click the protected page</span>\n<span class="token comment" spellcheck="true">// 3. Log in</span>\n<span class="token comment" spellcheck="true">// 4. Click the back button, note the URL each time</span>\n\n<span class="token keyword" >const</span> AuthExample <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>\n  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Router</span><span class="token punctuation" >></span></span>\n    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span><span class="token punctuation" >></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>AuthButton</span><span class="token punctuation" >/></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>ul</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>li</span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Link</span> <span class="token attr-name" >to</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>/public<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>公共页面<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Link</span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>li</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>li</span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Link</span> <span class="token attr-name" >to</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>/protected<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>受保护的页面<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Link</span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>li</span><span class="token punctuation" >></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>ul</span><span class="token punctuation" >></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Route</span> <span class="token attr-name" >path</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>/public<span class="token punctuation" >"</span></span> <span class="token attr-name" >component</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>Public<span class="token punctuation" >}</span></span><span class="token punctuation" >/></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Route</span> <span class="token attr-name" >path</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>/login<span class="token punctuation" >"</span></span> <span class="token attr-name" >component</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>Login<span class="token punctuation" >}</span></span><span class="token punctuation" >/></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>PrivateRoute</span> <span class="token attr-name" >path</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>/protected<span class="token punctuation" >"</span></span> <span class="token attr-name" >component</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span>Protected<span class="token punctuation" >}</span></span><span class="token punctuation" >/></span></span>\n    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>\n  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>Router</span><span class="token punctuation" >></span></span>\n<span class="token punctuation" >)</span>\n\n<span class="token keyword" >const</span> fakeAuth <span class="token operator" >=</span> <span class="token punctuation" >{</span>\n  isAuthenticated<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span>\n  <span class="token function" >authenticate</span><span class="token punctuation" >(</span>cb<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span>isAuthenticated <span class="token operator" >=</span> <span class="token boolean" >true</span>\n    <span class="token function" >setTimeout</span><span class="token punctuation" >(</span>cb<span class="token punctuation" >,</span> <span class="token number" >100</span><span class="token punctuation" >)</span> <span class="token comment" spellcheck="true">// fake async</span>\n  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>\n  <span class="token function" >signout</span><span class="token punctuation" >(</span>cb<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >this</span><span class="token punctuation" >.</span>isAuthenticated <span class="token operator" >=</span> <span class="token boolean" >false</span>\n    <span class="token function" >setTimeout</span><span class="token punctuation" >(</span>cb<span class="token punctuation" >,</span> <span class="token number" >100</span><span class="token punctuation" >)</span>\n  <span class="token punctuation" >}</span>\n<span class="token punctuation" >}</span>\n\n<span class="token keyword" >const</span> AuthButton <span class="token operator" >=</span> <span class="token function" >withRouter</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span> history <span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>\n  fakeAuth<span class="token punctuation" >.</span>isAuthenticated <span class="token operator" >?</span> <span class="token punctuation" >(</span>\n    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>p</span><span class="token punctuation" >></span></span>\n      欢迎<span class="token operator" >!</span> <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>button</span> <span class="token attr-name" >onClick</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>\n        fakeAuth<span class="token punctuation" >.</span><span class="token function" >signout</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> history<span class="token punctuation" >.</span><span class="token function" >push</span><span class="token punctuation" >(</span><span class="token string" >\'/\'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>\n      <span class="token punctuation" >}</span><span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>登出<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>button</span><span class="token punctuation" >></span></span>\n    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>p</span><span class="token punctuation" >></span></span>\n  <span class="token punctuation" >)</span> <span class="token punctuation" >:</span> <span class="token punctuation" >(</span>\n    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>p</span><span class="token punctuation" >></span></span>你没有登录。<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>p</span><span class="token punctuation" >></span></span>\n  <span class="token punctuation" >)</span>\n<span class="token punctuation" >)</span><span class="token punctuation" >)</span>\n\n<span class="token keyword" >const</span> PrivateRoute <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span> component<span class="token punctuation" >:</span> Component<span class="token punctuation" >,</span> <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>rest <span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>\n  <span class="token operator" >&lt;</span>Route <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>rest<span class="token punctuation" >}</span> render<span class="token operator" >=</span><span class="token punctuation" >{</span>props <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span>\n    fakeAuth<span class="token punctuation" >.</span>isAuthenticated <span class="token operator" >?</span> <span class="token punctuation" >(</span>\n      <span class="token operator" >&lt;</span>Component <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span><span class="token operator" >/</span><span class="token operator" >></span>\n    <span class="token punctuation" >)</span> <span class="token punctuation" >:</span> <span class="token punctuation" >(</span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Redirect</span> <span class="token attr-name" >to</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >{</span>\n        pathname<span class="token punctuation" >:</span> <span class="token string" >\'/login\'</span><span class="token punctuation" >,</span>\n        state<span class="token punctuation" >:</span> <span class="token punctuation" >{</span> <span class="token keyword" >from</span><span class="token punctuation" >:</span> props<span class="token punctuation" >.</span>location <span class="token punctuation" >}</span>\n      <span class="token punctuation" >}</span></span><span class="token attr-name" >}</span><span class="token punctuation" >/></span></span>\n    <span class="token punctuation" >)</span>\n  <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >/</span><span class="token operator" >></span>\n<span class="token punctuation" >)</span>\n\n<span class="token keyword" >const</span> Public <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h3</span><span class="token punctuation" >></span></span>公开<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h3</span><span class="token punctuation" >></span></span>\n<span class="token keyword" >const</span> Protected <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>h3</span><span class="token punctuation" >></span></span>受保护的<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>h3</span><span class="token punctuation" >></span></span>\n\n<span class="token keyword" >class</span> <span class="token class-name" >Login</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>\n  state <span class="token operator" >=</span> <span class="token punctuation" >{</span>\n    redirectToReferrer<span class="token punctuation" >:</span> <span class="token boolean" >false</span>\n  <span class="token punctuation" >}</span>\n\n  login <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>\n    fakeAuth<span class="token punctuation" >.</span><span class="token function" >authenticate</span><span class="token punctuation" >(</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>\n      <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span> redirectToReferrer<span class="token punctuation" >:</span> <span class="token boolean" >true</span> <span class="token punctuation" >}</span><span class="token punctuation" >)</span>\n    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>\n  <span class="token punctuation" >}</span>\n\n  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n    <span class="token keyword" >const</span> <span class="token punctuation" >{</span> <span class="token keyword" >from</span> <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>location<span class="token punctuation" >.</span>state <span class="token operator" >||</span> <span class="token punctuation" >{</span> <span class="token keyword" >from</span><span class="token punctuation" >:</span> <span class="token punctuation" >{</span> pathname<span class="token punctuation" >:</span> <span class="token string" >\'/\'</span> <span class="token punctuation" >}</span> <span class="token punctuation" >}</span>\n    <span class="token keyword" >const</span> <span class="token punctuation" >{</span> redirectToReferrer <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state\n    \n    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>redirectToReferrer<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>\n      <span class="token keyword" >return</span> <span class="token punctuation" >(</span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>Redirect</span> <span class="token attr-name" >to</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token keyword" >from</span><span class="token punctuation" >}</span></span><span class="token punctuation" >/></span></span>\n      <span class="token punctuation" >)</span>\n    <span class="token punctuation" >}</span>\n    \n    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>p</span><span class="token punctuation" >></span></span>您必须登录才能查看页面 <span class="token punctuation" >{</span><span class="token keyword" >from</span><span class="token punctuation" >.</span>pathname<span class="token punctuation" >}</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>p</span><span class="token punctuation" >></span></span>\n        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>button</span> <span class="token attr-name" >onClick</span><span class="token script language-javascript" ><span class="token punctuation" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>login<span class="token punctuation" >}</span></span><span class="token punctuation" >></span></span>登录<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>button</span><span class="token punctuation" >></span></span>\n      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>\n    <span class="token punctuation" >)</span>\n  <span class="token punctuation" >}</span>\n<span class="token punctuation" >}</span>\n\n<span class="token keyword" >export</span> <span class="token keyword" >default</span> AuthExample\n'}});